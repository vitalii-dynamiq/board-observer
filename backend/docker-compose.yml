# ==================================
# Board Observer - Database Only
# For local development
# ==================================
#
# Usage:
#   docker compose up -d     # Start PostgreSQL
#   docker compose down      # Stop PostgreSQL
#   docker compose logs -f   # View logs
#
# Connection:
#   Host: localhost
#   Port: 5481 (non-standard to avoid conflicts)
#   User: postgres
#   Password: postgres
#   Database: board_observer
#
# Connection URL:
#   postgresql://postgres:postgres@localhost:5481/board_observer
#
# ==================================

services:
  db:
    image: postgres:15-alpine
    container_name: board-observer-postgres
    restart: unless-stopped
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: board_observer
      # Logging (optional)
      # POSTGRES_INITDB_ARGS: "--data-checksums"
    ports:
      - "5481:5432"  # External: 5481, Internal: 5432
    volumes:
      - board_observer_postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 5s
      timeout: 5s
      retries: 5
    networks:
      - board-observer-network

networks:
  board-observer-network:
    name: board-observer-net
    driver: bridge

volumes:
  board_observer_postgres_data:
    name: board_observer_postgres_data
